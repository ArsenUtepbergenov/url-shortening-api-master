{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://url-shortening-api-master/./src/api.js","webpack://url-shortening-api-master/./src/linkError.js","webpack://url-shortening-api-master/./src/clipboard.js","webpack://url-shortening-api-master/./src/localStorage.js","webpack://url-shortening-api-master/./src/linkItem.js","webpack://url-shortening-api-master/./src/linksList.js","webpack://url-shortening-api-master/./main.js","webpack://url-shortening-api-master/./src/shortLink.js","webpack://url-shortening-api-master/./src/menu.js"],"sourcesContent":["export default class Api {\r\n  #url = null\r\n\r\n  constructor(url) {\r\n    this.#url = url\r\n  }\r\n\r\n  async post(data) {\r\n    try {\r\n      const response = await fetch(this.#url, {\r\n        method: 'POST',\r\n        body: JSON.stringify({ url: data }),\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      })\r\n\r\n      return response.json()\r\n    } catch (error) {\r\n      console.error('Error:', error)\r\n      return error\r\n    }\r\n  }\r\n}\r\n","export default class LinkError {\r\n  #errorMessage = document.getElementById('errorMessage')\r\n  #message = ''\r\n\r\n  constructor(msg) {\r\n    this.#message = msg\r\n  }\r\n\r\n  show(msg) {\r\n    this.#errorMessage.innerHTML = msg || this.#message\r\n  }\r\n\r\n  clear() {\r\n    this.#errorMessage.innerHTML = ''\r\n    this.#message = ''\r\n  }\r\n}\r\n","export default class Clipboard {\r\n  static save(text) {\r\n    navigator.clipboard\r\n      .writeText(text)\r\n      .then(() => {\r\n        console.log('Link copied to clipboard')\r\n      })\r\n      .catch(err => {\r\n        console.error('Failed to copy: ', err)\r\n      })\r\n  }\r\n}\r\n","export default class LocalStorage {\r\n  #storage = localStorage\r\n\r\n  save(data) {\r\n    let a = []\r\n    a = JSON.parse(this.#storage.getItem('links')) || []\r\n    a.push(data)\r\n    this.#storage.setItem('links', JSON.stringify(a))\r\n  }\r\n\r\n  get() {\r\n    return this.#storage.getItem('links')\r\n  }\r\n\r\n  clear() {\r\n    this.#storage.clear()\r\n  }\r\n}\r\n","export default class LinkItem {\r\n  static create({\r\n    originUrl = '',\r\n    shortenUrl = '',\r\n    buttonText = 'Copy',\r\n    onClick = null,\r\n  } = {}) {\r\n    const item = document.createElement('div')\r\n    item.classList.add('item')\r\n\r\n    const createLink = (url, className) => {\r\n      const link = document.createElement('a')\r\n      link.classList.add('link', className)\r\n      link.href = url\r\n      link.textContent = url\r\n      return link\r\n    }\r\n\r\n    item.appendChild(createLink(originUrl, 'origin'))\r\n    item.appendChild(document.createElement('div')).classList.add('hr')\r\n    item.appendChild(createLink(shortenUrl, 'shorten'))\r\n\r\n    const button = document.createElement('button')\r\n    button.classList.add('button', 'primary-button')\r\n    button.textContent = buttonText\r\n    if (typeof onClick === 'function') {\r\n      button.addEventListener('click', onClick)\r\n    }\r\n    item.appendChild(button)\r\n\r\n    return item\r\n  }\r\n}\r\n","import Clipboard from './clipboard.js'\r\nimport LocalStorage from './localStorage.js'\r\nimport LinkItem from './linkItem.js'\r\n\r\nexport default class LinksList {\r\n  #linksList = document.getElementById('linksList')\r\n  #ls = null\r\n  #copiedBuffer = []\r\n\r\n  constructor() {\r\n    this.#ls = new LocalStorage()\r\n  }\r\n\r\n  init() {\r\n    const fromLS = this.getAll()\r\n\r\n    for (const l of fromLS) {\r\n      this.add(l.origin, l.shorten)\r\n    }\r\n  }\r\n\r\n  save(origin, shorten) {\r\n    this.add(origin, shorten)\r\n    this.#ls.save({ origin, shorten })\r\n  }\r\n\r\n  #updateCopyButtons() {\r\n    for (const i of this.#copiedBuffer) {\r\n      i.textContent = 'Copy'\r\n      i.classList.remove('copied')\r\n    }\r\n  }\r\n\r\n  add(origin, shorten) {\r\n    const linkItem = LinkItem.create({\r\n      originUrl: origin,\r\n      shortenUrl: shorten,\r\n      buttonText: 'Copy',\r\n      onClick: () => {\r\n        Clipboard.save(shorten)\r\n        this.#updateCopyButtons()\r\n        linkItem.lastChild.textContent = 'Copied!'\r\n        linkItem.lastChild.classList.add('copied')\r\n        this.#copiedBuffer.push(linkItem.lastChild)\r\n      },\r\n    })\r\n\r\n    this.#linksList.appendChild(linkItem)\r\n  }\r\n\r\n  getAll() {\r\n    return JSON.parse(this.#ls.get()) || []\r\n  }\r\n}\r\n","import './src/styles.scss'\r\nimport Menu from './src/menu.js'\r\nimport ShortLink from './src/shortLink.js'\r\n\r\nconst shortLink = new ShortLink()\r\nconst menu = new Menu()\r\n","import Api from './api.js'\r\nimport LinkError from './linkError.js'\r\nimport LinksList from './linksList.js'\r\n\r\nconst PROXY_URL = 'http://127.0.0.1:3000/shorten'\r\n\r\nexport default class ShortLink {\r\n  #shortenForm = document.getElementById('shortenForm')\r\n  #linkInput = document.getElementById('linkInput')\r\n  #api = null\r\n  error = null\r\n  #linksList = null\r\n\r\n  constructor() {\r\n    this.#linksList = new LinksList()\r\n    this.error = new LinkError('')\r\n    this.#api = new Api(PROXY_URL)\r\n    this.#shortenForm.addEventListener('submit', this.#submitForm)\r\n\r\n    this.#linksList.init()\r\n  }\r\n\r\n  #submitForm = event => {\r\n    event.preventDefault()\r\n\r\n    try {\r\n      if (!this.#linkInput.value) throw new Error('Please add a link')\r\n      else {\r\n        this.#linkInput.classList.remove('input-error')\r\n        this.error.clear()\r\n      }\r\n    } catch (error) {\r\n      console.error(error)\r\n      this.error.show(error.message)\r\n      this.#linkInput.classList.add('input-error')\r\n      return\r\n    }\r\n\r\n    if (this.#shortenForm.checkValidity()) {\r\n      this.#submit()\r\n    } else {\r\n      this.#shortenForm.reportValidity()\r\n    }\r\n  }\r\n\r\n  #submit() {\r\n    this.#api\r\n      .post(this.#linkInput.value)\r\n      .then(res => {\r\n        if (res.result_url) {\r\n          console.log(res)\r\n\r\n          this.#linksList.save(this.#linkInput.value, res.result_url)\r\n\r\n          this.error.clear()\r\n        } else if (res.error) throw res.error\r\n      })\r\n      .catch(error => {\r\n        console.error(error)\r\n        this.error.show(error)\r\n      })\r\n  }\r\n\r\n  destroy() {\r\n    this.#shortenForm.removeEventListener('submit', this.#submitForm)\r\n    this.#shortenForm = null\r\n  }\r\n}\r\n","export default class Menu {\r\n  constructor() {\r\n    document\r\n      .getElementById('navMenuButton')\r\n      .addEventListener('click', () => {\r\n        document.getElementById('navMobile').classList.toggle('show')\r\n      })\r\n  }\r\n}\r\n"],"names":["Api","constructor","url","this","post","data","fetch","method","body","JSON","stringify","headers","json","error","console","LinkError","document","getElementById","msg","show","innerHTML","clear","Clipboard","save","text","navigator","clipboard","writeText","then","log","catch","err","LocalStorage","localStorage","a","parse","getItem","push","setItem","get","LinkItem","create","originUrl","shortenUrl","buttonText","onClick","item","createElement","classList","add","createLink","className","link","href","textContent","appendChild","button","addEventListener","LinksList","init","fromLS","getAll","l","origin","shorten","i","remove","linkItem","lastChild","event","preventDefault","value","Error","message","checkValidity","reportValidity","res","result_url","destroy","removeEventListener","toggle"],"sourceRoot":""}