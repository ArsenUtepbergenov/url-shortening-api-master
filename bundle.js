(()=>{"use strict";class t{#t=null;constructor(t){this.#t=t}async post(t){try{return(await fetch(this.#t,{method:"POST",body:JSON.stringify({url:t}),headers:{"Content-Type":"application/json"}})).json()}catch(t){return console.error("Error:",t),t}}}class e{#e=document.getElementById("errorMessage");#s="";constructor(t){this.#s=t}show(t){this.#e.innerHTML=t||this.#s}clear(){this.#e.innerHTML="",this.#s=""}}class s{static save(t){navigator.clipboard.writeText(t).then((()=>{console.log("Link copied to clipboard")})).catch((t=>{console.error("Failed to copy: ",t)}))}}class r{#r=localStorage;save(t){let e=[];e=JSON.parse(this.#r.getItem("links"))||[],e.push(t),this.#r.setItem("links",JSON.stringify(e))}get(){return this.#r.getItem("links")}clear(){this.#r.clear()}}class n{static create({originUrl:t="",shortenUrl:e="",buttonText:s="Copy",onClick:r=null}={}){const n=document.createElement("div");n.classList.add("item");const i=(t,e)=>{const s=document.createElement("a");return s.classList.add("link",e),s.href=t,s.textContent=t,s};n.appendChild(i(t,"origin")),n.appendChild(document.createElement("div")).classList.add("hr"),n.appendChild(i(e,"shorten"));const o=document.createElement("button");return o.classList.add("button","primary-button"),o.textContent=s,"function"==typeof r&&o.addEventListener("click",r),n.appendChild(o),n}}class i{#n=document.getElementById("linksList");#i=null;#o=[];constructor(){this.#i=new r}init(){const t=this.getAll();for(const e of t)this.add(e.origin,e.shorten)}save(t,e){this.add(t,e),this.#i.save({origin:t,shorten:e})}#l(){for(const t of this.#o)t.textContent="Copy",t.classList.remove("copied")}add(t,e){const r=n.create({originUrl:t,shortenUrl:e,buttonText:"Copy",onClick:()=>{s.save(e),this.#l(),r.lastChild.textContent="Copied!",r.lastChild.classList.add("copied"),this.#o.push(r.lastChild)}});this.#n.appendChild(r)}getAll(){return JSON.parse(this.#i.get())||[]}}new class{#a=document.getElementById("shortenForm");#c=document.getElementById("linkInput");#h=null;error=null;#n=null;constructor(){this.#n=new i,this.error=new e(""),this.#h=new t("https://cors-anywhere.herokuapp.com/https://cleanuri.com/api/v1/shorten"),this.#a.addEventListener("submit",this.#d),this.#n.init()}#d=t=>{t.preventDefault();try{if(!this.#c.value)throw new Error("Please add a link");this.#c.classList.remove("input-error"),this.error.clear()}catch(t){return console.error(t),this.error.show(t.message),void this.#c.classList.add("input-error")}this.#a.checkValidity()?this.#u():this.#a.reportValidity()};#u(){this.#h.post(this.#c.value).then((t=>{if(t.result_url)console.log(t),this.#n.save(this.#c.value,t.result_url),this.error.clear();else if(t.error)throw t.error})).catch((t=>{console.error(t),this.error.show(t)}))}destroy(){this.#a.removeEventListener("submit",this.#d),this.#a=null}},new class{constructor(){document.getElementById("navMenuButton").addEventListener("click",(()=>{document.getElementById("navMobile").classList.toggle("show")}))}}})();
//# sourceMappingURL=bundle.js.map